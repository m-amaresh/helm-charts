{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "properties": {
    "global": {
      "type": "object",
      "properties": {
        "imageRegistry": {"type": "string"},
        "imagePullSecrets": {"type": "array"},
        "storageClass": {"type": "string"}
      }
    },
    "nameOverride": {"type": "string"},
    "fullnameOverride": {"type": "string"},
    "commonLabels": {"type": "object"},
    "commonAnnotations": {"type": "object"},
    "clusterDomain": {"type": "string", "default": "cluster.local"},
    "image": {
      "type": "object",
      "properties": {
        "registry": {"type": "string", "default": "docker.io"},
        "repository": {"type": "string", "default": "redis"},
        "tag": {"type": "string", "default": "8.2.0-alpine"},
        "pullPolicy": {"type": "string", "enum": ["Always", "IfNotPresent", "Never"], "default": "IfNotPresent"},
        "pullSecrets": {"type": "array"}
      }
    },
    "cluster": {
      "type": "object",
      "properties": {
        "nodes": {"type": "integer", "minimum": 6, "default": 6},
        "replicas": {"type": "integer", "minimum": 1, "default": 1},
        "enableGossipPortService": {"type": "boolean", "default": true},
        "init": {
          "type": "object",
          "properties": {
            "enabled": {"type": "boolean", "default": true}
          }
        }
      }
    },
    "auth": {
      "type": "object",
      "properties": {
        "enabled": {"type": "boolean", "default": false},
        "password": {"type": "string"},
        "existingSecret": {"type": "string"},
        "existingSecretPasswordKey": {"type": "string"}
      }
    },
    "configuration": {"type": "string"},
    "existingConfigmap": {"type": "string"},
    "redis": {
      "type": "object",
      "properties": {
        "containerPorts": {
          "type": "object",
          "properties": {
            "redis": {"type": "integer", "default": 6379},
            "gossip": {"type": "integer", "default": 16379}
          }
        },
        "serviceAccount": {
          "type": "object",
          "properties": {
            "create": {"type": "boolean", "default": true},
            "name": {"type": "string"},
            "automountServiceAccountToken": {"type": "boolean", "default": false},
            "annotations": {"type": "object"}
          }
        },
        "resourcesPreset": {"type": "string", "enum": ["nano", "micro", "small", "medium", "large", "xlarge", "2xlarge", "none"], "default": "nano"},
        "resources": {
          "type": "object",
          "properties": {
            "limits": {"type": "object"},
            "requests": {"type": "object"}
          }
        },
        "persistence": {
          "type": "object",
          "properties": {
            "enabled": {"type": "boolean", "default": true},
            "storageClass": {"type": "string"},
            "accessModes": {"type": "array", "default": ["ReadWriteOnce"]},
            "size": {"type": "string", "default": "8Gi"},
            "existingClaim": {"type": "string"},
            "selector": {"type": "object"},
            "annotations": {"type": "object"}
          }
        },
        "service": {
          "type": "object",
          "properties": {
            "type": {"type": "string", "enum": ["ClusterIP", "NodePort", "LoadBalancer"], "default": "ClusterIP"},
            "ports": {
              "type": "object",
              "properties": {
                "redis": {"type": "integer", "default": 6379}
              }
            },
            "annotations": {"type": "object"},
            "headless": {
              "type": "object",
              "properties": {
                "annotations": {"type": "object"}
              }
            }
          }
        },
        "podSecurityContext": {
          "type": "object",
          "properties": {
            "enabled": {"type": "boolean", "default": true},
            "fsGroup": {"type": "integer", "default": 1001},
            "runAsUser": {"type": "integer", "default": 1001},
            "runAsGroup": {"type": "integer", "default": 1001},
            "runAsNonRoot": {"type": "boolean", "default": true},
            "fsGroupChangePolicy": {"type": "string", "default": "Always"},
            "supplementalGroups": {"type": "array", "default": []},
            "sysctls": {"type": "array", "default": []}
          }
        },
        "containerSecurityContext": {
          "type": "object",
          "properties": {
            "enabled": {"type": "boolean", "default": true},
            "runAsUser": {"type": "integer", "default": 1001},
            "runAsGroup": {"type": "integer", "default": 1001},
            "runAsNonRoot": {"type": "boolean", "default": true},
            "allowPrivilegeEscalation": {"type": "boolean", "default": false},
            "readOnlyRootFilesystem": {"type": "boolean", "default": true},
            "seccompProfile": {
              "type": "object",
              "properties": {
                "type": {"type": "string", "default": "RuntimeDefault"}
              }
            },
            "capabilities": {
              "type": "object",
              "properties": {
                "drop": {"type": "array", "default": ["ALL"]}
              }
            }
          }
        },
        "livenessProbe": {
          "type": "object",
          "properties": {
            "enabled": {"type": "boolean", "default": true},
            "initialDelaySeconds": {"type": "integer", "default": 30},
            "periodSeconds": {"type": "integer", "default": 10},
            "timeoutSeconds": {"type": "integer", "default": 5},
            "failureThreshold": {"type": "integer", "default": 5},
            "successThreshold": {"type": "integer", "default": 1}
          }
        },
        "readinessProbe": {
          "type": "object",
          "properties": {
            "enabled": {"type": "boolean", "default": true},
            "initialDelaySeconds": {"type": "integer", "default": 20},
            "periodSeconds": {"type": "integer", "default": 5},
            "timeoutSeconds": {"type": "integer", "default": 1},
            "failureThreshold": {"type": "integer", "default": 5},
            "successThreshold": {"type": "integer", "default": 1}
          }
        },
        "startupProbe": {
          "type": "object",
          "properties": {
            "enabled": {"type": "boolean", "default": true},
            "initialDelaySeconds": {"type": "integer", "default": 10},
            "periodSeconds": {"type": "integer", "default": 10},
            "timeoutSeconds": {"type": "integer", "default": 5},
            "failureThreshold": {"type": "integer", "default": 30},
            "successThreshold": {"type": "integer", "default": 1}
          }
        },
        "podAffinityPreset": {"type": "string", "default": ""},
        "podAntiAffinityPreset": {"type": "string", "enum": ["", "soft", "hard"], "default": "soft"},
        "nodeAffinityPreset": {
          "type": "object",
          "properties": {
            "type": {"type": "string", "default": ""},
            "key": {"type": "string", "default": ""},
            "values": {"type": "array", "default": []}
          }
        },
        "affinity": {"type": "object", "default": {}},
        "nodeSelector": {"type": "object", "default": {}},
        "tolerations": {"type": "array", "default": []},
        "topologySpreadConstraints": {"type": "array", "default": []},
        "schedulerName": {"type": "string", "default": ""},
        "extraVolumes": {"type": "array", "default": []},
        "extraVolumeMounts": {"type": "array", "default": []},
        "sidecars": {"type": "array", "default": []},
        "initContainers": {"type": "array", "default": []},
        "lifecycleHooks": {"type": "object", "default": {}}
      }
    },
    "networkPolicy": {
      "type": "object",
      "properties": {
        "policies": {"type": "array", "default": []}
      }
    }
  },
  "additionalProperties": false
}
